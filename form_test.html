<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Formulario de Contacto</title>
    <link rel="stylesheet" href="frontend/assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #5a8f69;
            margin-bottom: 30px;
        }
        .status {
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            text-align: center;
        }
        .status.success {
            background-color: rgba(39, 174, 96, 0.2);
            color: #27ae60;
            border: 1px solid #27ae60;
        }
        .status.error {
            background-color: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Prueba de Formulario de Contacto</h1>
        
        <div id="initialStatus" class="status">
            <p>Esta página de prueba cargará el formulario de contacto y verificará su funcionamiento.</p>
        </div>
        
        <div id="loadingStatus" class="status hidden">
            <p><i class="fas fa-spinner fa-spin"></i> Cargando formulario...</p>
        </div>
        
        <div id="successStatus" class="status success hidden">
            <p><i class="fas fa-check-circle"></i> Formulario cargado correctamente</p>
        </div>
        
        <div id="errorStatus" class="status error hidden">
            <p><i class="fas fa-exclamation-circle"></i> Error al cargar el formulario</p>
        </div>
        
        <div id="formContainer">
            <!-- El formulario se cargará aquí -->
        </div>
    </div>

    <script>
        // Simular la carga del componente de contacto
        document.addEventListener('DOMContentLoaded', async function() {
            const initialStatus = document.getElementById('initialStatus');
            const loadingStatus = document.getElementById('loadingStatus');
            const successStatus = document.getElementById('successStatus');
            const errorStatus = document.getElementById('errorStatus');
            const formContainer = document.getElementById('formContainer');
            
            // Mostrar estado de carga
            initialStatus.classList.add('hidden');
            loadingStatus.classList.remove('hidden');
            
            try {
                // Simular la carga del componente de contacto
                // En una implementación real, esto sería una importación dinámica
                const contactFormHTML = `
                    <section id="contact" class="contact">
                        <h2 class="section-title">Formulario de Prueba</h2>
                        <div class="contact-form">
                            <form id="contactForm">
                                <div class="form-group">
                                    <input type="text" id="name" name="name" placeholder="Tu Nombre" required>
                                </div>
                                <div class="form-group">
                                    <input type="email" id="email" name="email" placeholder="Tu Email" required>
                                </div>
                                <div class="form-group">
                                    <input type="tel" id="phone" name="phone" placeholder="Tu Teléfono">
                                </div>
                                <div class="form-group">
                                    <textarea id="message" name="message" placeholder="Tu Mensaje" rows="5" required></textarea>
                                </div>
                                <div id="formMessage" class="form-message"></div>
                                <button type="submit" class="btn btn-primary">Enviar Mensaje</button>
                            </form>
                        </div>
                    </section>
                `;
                
                // Insertar el formulario en el contenedor
                formContainer.innerHTML = contactFormHTML;
                
                // Ocultar estado de carga y mostrar éxito
                loadingStatus.classList.add('hidden');
                successStatus.classList.remove('hidden');
                
                // Simular la inicialización de los event listeners
                setTimeout(() => {
                    initializeTestForm();
                }, 1000);
                
            } catch (error) {
                console.error('Error al cargar el formulario:', error);
                loadingStatus.classList.add('hidden');
                errorStatus.classList.remove('hidden');
            }
        });
        
        // Función para mostrar mensajes en el formulario de contacto
        function showFormMessage(type, message) {
            const messageElement = document.getElementById('formMessage');
            if (messageElement) {
                messageElement.textContent = message;
                messageElement.className = `form-message ${type}`;
                
                // Ocultar el mensaje después de 5 segundos
                setTimeout(() => {
                    messageElement.className = 'form-message';
                }, 5000);
            }
        }
        
        // Función para manejar el envío del formulario de contacto (versión de prueba)
        async function handleContactFormSubmit(event) {
            event.preventDefault();
            
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const message = document.getElementById('message').value;
            
            // Validar que todos los campos requeridos estén completos
            if (!name || !email || !message) {
                showFormMessage('error', 'Por favor, completa todos los campos requeridos.');
                return;
            }
            
            // Mostrar mensaje de carga
            const submitButton = document.querySelector('#contactForm .btn');
            const originalText = submitButton.textContent;
            submitButton.textContent = 'Enviando...';
            submitButton.disabled = true;
            
            try {
                // Simular envío al backend
                // En una implementación real, esto sería una llamada fetch
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Simular una respuesta exitosa
                const result = {
                    message: 'Mensaje enviado exitosamente. Nos pondremos en contacto contigo pronto.'
                };
                
                showFormMessage('success', result.message);
                // Limpiar el formulario
                document.getElementById('contactForm').reset();
                
            } catch (error) {
                console.error('Error al enviar el formulario:', error);
                showFormMessage('error', 'Error al enviar el mensaje. Por favor, inténtalo de nuevo más tarde.');
            } finally {
                // Restaurar botón
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }
        }
        
        // Función para inicializar los event listeners del formulario de prueba
        function initializeTestForm() {
            const contactForm = document.getElementById('contactForm');
            if (contactForm) {
                contactForm.addEventListener('submit', handleContactFormSubmit);
                console.log('Event listener adjuntado correctamente al formulario de prueba');
            } else {
                console.error('No se pudo encontrar el formulario de prueba');
            }
        }
    </script>
</body>
</html>